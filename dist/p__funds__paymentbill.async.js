(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"2RCT":function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=n(a("wCAj"));a("IzEo");var r=n(a("bx4M"));a("+L6B");var o=n(a("2/Rp"));a("miYZ");var d=n(a("tsqr")),c=n(a("lwsE")),s=n(a("W8MJ")),u=n(a("a1gu")),f=n(a("Nsbk")),p=n(a("7W2i"));a("y8nQ");var m,h,g,y,v=n(a("Vl3Y")),x=l(a("q1tI")),E=n(a("wd/R")),b=a("MuoO"),w=a("+n12"),I=n(a("xLbA")),Y=a("RO9D"),D=a("7cBs"),S=n(a("WaTI")),k=(m=(0,b.connect)(function(e){var t=e.finance,a=e.loading;return{finance:t,loading:a.models.list}}),h=v.default.create(),m(g=h((y=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,u.default)(this,(0,f.default)(t).call(this,e)),a.cancer=function(){var e=(0,Y.isEmptyObject)(a.props.match)?0:a.props.match.params.id;a.fetchRevocation({receiptsCode:e})},a.back=function(){window.history.back()},a.print=function(){var e=a.props.finance.statisticalInfo,t=e||{},n=t.goodsVos,l=a.statementDataHandle(n),i=l.dishesData,r=l.goodsPaymentStr;e.dishesData=i,e.goodsPaymentStr=r;var o=localStorage.getItem("androidToken");o?(console.log("---------android\u6253\u5370---------",e),"undefined"!==typeof androidToJs&&(console.log("---------android\u6253\u5370111111---------",e),androidToJs.printBalance(JSON.stringify(e)))):(window.document.body.innerHTML=window.document.getElementById("billDetails").innerHTML,window.print(),window.location.reload())},a.state={loading:!0},a}return(0,p.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=(0,Y.isEmptyObject)(this.props.location)?0:this.props.location.query.id;this.statisticalInfo({receiptsCode:e})}},{key:"statisticalInfo",value:function(e){var t=this;this.props.dispatch({type:"finance/statisticalInfo",payload:e}).then(function(e){t.setState({loading:!1})})}},{key:"fetchRevocation",value:function(e){var t=this;this.props.dispatch({type:"finance/fetchRevocation",payload:e}).then(function(){var e=t.props.finance.revocationData,a=e.code;200===a?d.default.info("\u64a4\u9500\u8d27\u6b3e\u5355\u6210\u529f!").then(function(){window.location.href="/funds/loansettlement"}):d.default.info("\u64a4\u9500\u8d27\u6b3e\u5355\u5931\u8d25!")})}},{key:"statementDataHandle",value:function(e){var t=[],a="";return Array.isArray(e)&&e.map(function(n,l){var i=n.amount,r=n.value,o=n.goodsPaymentStr;if(l==e.length-1)return a=o,{dishesData:t,goodsPaymentStr:a};(i||r)&&t.push({amount:i,value:r})}),{dishesData:t,goodsPaymentStr:a}}},{key:"render",value:function(){var e=this.props.finance.statisticalInfo,t=e&&!Array.isArray(e)?e:[],a=t.createName,n=t.createTime,l=t.goodsVos,d=t.receiptsCode,c=t.supplierName,s=t.carNo,u=t.stallName,f=t.startTime,p=t.endTime,m=t.enable,h=t.goodsPayment,g=l?l.length:0,y=[{title:"\u54c1\u79cd",dataIndex:"attrName",align:"center"},{title:"\u9500\u552e\u8d27\u6b3e",dataIndex:"goodsAmount",align:"left",render:function(e,t,a){var n=t.goodsAmount,l=t.goodsPaymentStr,i=l?l.split("\u8d1f").length:-1;return a<g-1?x.default.createElement("span",null,n?(0,D.Yuan)(n,2):""):{children:2===i?x.default.createElement("span",{className:I.default.neg},l):x.default.createElement("span",{className:I.default.bold},l),props:{colSpan:4}}}},{title:"\u4ef6\u6570",dataIndex:"number",align:"center",render:function(e,t,a){var n=t.number;return a<g-1?x.default.createElement("span",null,n||""):{children:"",props:{colSpan:0}}}},{title:"\u91cd\u91cf",dataIndex:"weight",align:"center",render:function(e,t,a){var n=t.weight;return a<g-1?x.default.createElement("span",null,n||""):{children:"",props:{colSpan:0}}}},{title:"\u5e73\u5747\u552e\u4ef7",dataIndex:"averageAmount",align:"center",render:function(e,t,a){var n=t.averageAmount;return a<g-1?x.default.createElement("span",null,n?(0,D.Yuan)(n,2):""):{children:"",props:{colSpan:0}}}},{title:"\u5e73\u5747\u91cd\u91cf",dataIndex:"averageWeight",align:"center",render:function(e,t,a){var n=t.averageWeight;return a<g-1?x.default.createElement("span",null,n||""):{children:"(\u5c0f\u5199)",props:{colSpan:1}}}},{title:"\u8d39\u7528\u7c7b\u578b",dataIndex:"value",align:"center",render:function(e,t,a){var n=t.value;return a<g-1?x.default.createElement("span",null,n):{children:x.default.createElement("span",null,(0,D.Yuan)(h,2)),props:{colSpan:3}}}},{title:"\u6263\u6b3e\u91d1\u989d",dataIndex:"amount",align:"center",render:function(e,t,a){var n=t.amount;return a<g-1?x.default.createElement("span",null,null!==n?(0,D.Yuan)(n,2):""):{children:"",props:{colSpan:0}}}}];return x.default.createElement("div",{className:I.default.billDetails,id:"billDetails"},x.default.createElement(r.default,{bordered:!1,title:""},x.default.createElement("div",{className:I.default.paymentbill},x.default.createElement("div",{style:{display:"flex",height:"60px",lineHeight:"60px"}},x.default.createElement("h1",{style:{flex:1,textAlign:"center"}},u),x.default.createElement("span",{style:{position:"absolute",right:"10px",color:"#FF6666",fontWeight:"600"}},"NO:".concat(void 0!==d?d:""))),x.default.createElement("div",{style:{display:"flex"}},x.default.createElement("h2",{style:{flex:1,textAlign:"center"}},"\u5546\u54c1\u9500\u552e\u8f66\u6b21\u7ed3\u7b97\u5355"),x.default.createElement("div",{style:{position:"absolute",right:"10px"}},x.default.createElement(o.default,{type:"primary",onClick:this.cancer,disabled:!m,style:{marginRight:"5px",display:"none"}},"\u64a4\u9500"),x.default.createElement(o.default,{onClick:this.print,style:{marginRight:"5px"}},"\u6253\u5370"),x.default.createElement(o.default,{type:"primary",onClick:this.back,style:{marginRight:"5px"}},"\u8fd4\u56de"))),x.default.createElement("div",{style:{display:"flex"}},x.default.createElement("h3",{style:{flex:1,textAlign:"left"}},"\u8d27\u8001\u677f\uff1a".concat(void 0!==c?c:""," ").concat(void 0!==s?(0,w.fixedZeroTo4Bit)(s,4):0,"\u8f66")),x.default.createElement("h3",{style:{flex:1}},f?"\u5230\u8d27\u65f6\u95f4\uff1a".concat((0,E.default)(f).format("YYYY-MM-DD")):"\u5230\u8d27\u65f6\u95f4\uff1a"),x.default.createElement("h3",{style:{flex:1}},p?"\u552e\u7f44\u65f6\u95f4\uff1a".concat((0,E.default)(p).format("YYYY-MM-DD")):"\u552e\u7f44\u65f6\u95f4\uff1a")),x.default.createElement("img",{alt:"text",src:S.default,hidden:m,style:{position:"absolute",width:"100px",height:"100px",top:"120px",right:"80px",zIndex:100}}))),x.default.createElement(r.default,{bordered:!1,title:"",bodyStyle:{padding:"0 16px"}},x.default.createElement(i.default,{dataSource:l,columns:y,bordered:!0,pagination:!1,loading:this.state.loading})),x.default.createElement(r.default,{style:{border:0}},x.default.createElement("div",{style:{display:"flex"}},x.default.createElement("h3",{style:{flex:1}},"\u7ed3\u7b97\u4eba\uff1a".concat(void 0!==a?a:"")),x.default.createElement("h3",{style:{flex:1,textAlign:"right"}},"\u7ed3\u7b97\u65f6\u95f4\uff1a".concat((0,E.default)(n).format("YYYY-MM-DD"))))))}}]),t}(x.PureComponent),g=y))||g)||g);t.default=k}}]);