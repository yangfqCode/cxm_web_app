(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"4ECH":function(t,e,a){t.exports={content:"content___3khzW",title:"title___1Wfs6",list:"list___1cqJI"}},e6lX:function(t,e,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("IzEo");var o=n(a("bx4M"));a("+L6B");var r=n(a("2/Rp")),i=n(a("lwsE")),d=n(a("W8MJ")),u=n(a("a1gu")),c=n(a("Nsbk")),s=n(a("7W2i"));a("g9YV");var f,m,h,p=n(a("wCAj")),g=l(a("q1tI")),v=a("MuoO"),E=n(a("usdK")),x=n(a("d3jC")),y=l(a("+n12")),b=(a("cA2t"),a("7cBs")),N=(a("RO9D"),n(a("qwlH"))),I=(p.default.Column,f=(0,v.connect)(function(t){var e=t.batch,a=t.loading;return{batch:e,loading:a.models.list}}),f((h=function(t){function e(t){var a;return(0,i.default)(this,e),a=(0,u.default)(this,(0,c.default)(e).call(this,t)),a.router=function(){E.default.goBack()},a.getExtraContent=function(t){return g.default.createElement("div",{className:x.default.extraContent,style:{display:"flex",height:"40px",lineHeight:"40px"}},g.default.createElement("span",{style:{flex:1}},t),g.default.createElement(r.default,{type:"primary",className:x.default.btn,style:{float:"right",marginRight:"5px",marginTop:"5px"},onClick:a.router},"\u8fd4\u56de"))},a.onRef=function(t){a.child=t},a.print=function(t){a.child.print(t)},a.state={loading:!1,name:null,carNo:null},a}return(0,s.default)(e,t),(0,d.default)(e,[{key:"componentDidMount",value:function(){var t=this.props.location.query,e=t.id,a=t.name,n=t.carNo,l=t.startDate,o=l?{batchId:e,startDate:l}:{batchId:e};this.fetchData(o),this.setState({name:a,carNo:n})}},{key:"fetchData",value:function(t){var e=this;this.props.dispatch({type:"batch/fetchBatchData",payload:t}).then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var t,e=this.props,a=e.batch.batchDataLis,n=(e.loading,this.state),l=n.name,i=n.carNo,d=[],u=[];Array.isArray(a)&&null!=a&&a.length>0&&(t=a[0].createTime,a.map(function(t){var e=t.batchDataList,a=t.createTime,n=t.goodAmount,l=t.saleNumber,o=t.saleWeight;u=u.concat(u,e);var r=[{title:a}],i=[{title:"\u5408\u8ba1",saleNumber:l,saleWeight:o,goodsAmount:n}];d=d.concat(r,e,i)}));var c=this.getExtraContent(t),s={pageSize:20},f=[{title:"",dataIndex:"title",render:function(t,e){var a=e.title;return g.default.createElement("span",{className:void 0!==a?"active":""},void 0!==a?a:"")}},{title:"\u65e5\u671f",dataIndex:"createTime"},{title:"\u54c1\u79cd",dataIndex:"goodsAttrName"},{title:"\u6d41\u6c34\u53f7",dataIndex:"todayNo",render:function(t,e){var a=e.todayNo;return g.default.createElement("span",null,void 0!==a?y.fixedZeroTo4Bit(a,6):"")}},{title:"\u5305\u88c5\u7c7b\u578b",dataIndex:"packType"},{title:"\u4ef6\u6570",dataIndex:"saleNumber"},{title:"\u91cd\u91cf",dataIndex:"saleWeight",render:function(t,e){var a=e.saleWeight;return g.default.createElement("span",null,void 0!==a?(0,b.Yuan)(a,2):null)}},{title:"\u8d27\u6b3e",dataIndex:"goodAmount",render:function(t,e){var a=e.goodsAmount;return g.default.createElement("span",null,void 0!==a?(0,b.Yuan)(a,2):null)}}],m=[{title:"\u54c1\u79cd",dataIndex:"goodsAttrName"},{title:"\u4ef6\u6570",dataIndex:"saleNumber"},{title:"\u91cd\u91cf",dataIndex:"saleWeight",render:function(t,e){var a=e.saleWeight;return g.default.createElement("span",null,void 0!==a?(0,b.Yuan)(a,2):null)}},{title:"\u8d27\u6b3e",dataIndex:"goodAmount",render:function(t,e){var a=e.goodsAmount;return g.default.createElement("span",null,void 0!==a?(0,b.Yuan)(a,2):null)}}];return console.log(u,m,l,i),g.default.createElement("div",{className:x.default.batchLayout},g.default.createElement(o.default,{className:x.default.listCard,bordered:!1,title:"",extra:c},g.default.createElement(r.default,{type:"primary",className:x.default.btn,onClick:this.print.bind(this,Math.ceil(u.length/2))},"\u6253\u5370"),g.default.createElement(p.default,{dataSource:d,columns:f,pagination:s,scroll:{x:800},bordered:!0}),g.default.createElement("div",{className:x.default.fix},g.default.createElement(N.default,{onRef:this.onRef,data:u,columns:m,name:l,carNo:i,type:"col"}))))}}]),e}(g.PureComponent),m=h))||m);e.default=I},qwlH:function(t,e,a){"use strict";var n=a("284h"),l=a("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("IzEo");var o=l(a("bx4M"));a("+L6B");var r=l(a("2/Rp")),i=l(a("lwsE")),d=l(a("W8MJ")),u=l(a("a1gu")),c=l(a("Nsbk")),s=l(a("7W2i"));a("g9YV");var f=l(a("wCAj")),m=n(a("q1tI")),h=l(a("wd/R")),p=(l(a("xKz9")),l(a("cLAn"))),g=n(a("+n12")),v=(a("7cBs"),l(a("4ECH"))),E=(f.default.Column,function(t){function e(t){var a;return(0,i.default)(this,e),a=(0,u.default)(this,(0,c.default)(e).call(this,t)),a.print=function(t){t=t||1;for(var e=0;e<t;e++){var n=document.getElementById("app".concat(e));p.default.toPng(n,{width:"576"}).then(function(t){var e=new Image;e.src=t,""!==t&&a._androidToJs(t.split(",")[1])}).catch(function(t){console.error("oops, something went wrong!",t)})}},a._androidToJs=function(t){"undefined"!==typeof androidToJs&&androidToJs.printImgByBase64(t,0,!0)},a.state={short_name:localStorage.getItem("short_name")},a}return(0,s.default)(e,t),(0,d.default)(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"render",value:function(){var t=this.props,e=t.data,a=t.columns,n=t.name,l=t.carNo,i=(t.type,this.state.short_name),d=30,u=[];if(e&&!e.length)return!1;if(e.length){var c=Math.ceil(e.length/d),s=e.slice(0,e.length-d*(c-1)),p=e.slice(e.length-d*(c-1),e.length);if(u.push(s),p.length)for(var E=0;E<p.length/d;E++)u.push(p.slice(d*E,d*E+d));for(var x=Math.ceil(e.length/3)-1;x>=0;x--);}return console.log(u),m.default.createElement("div",null,m.default.createElement(r.default,{onClick:this.print.bind(this,u.length)},"\u6253\u5370"),u&&u.map(function(t,e){return m.default.createElement(o.default,{id:"app".concat(e),className:v.default.content,bordered:!1,title:"",extra:"",key:e},m.default.createElement("div",{className:v.default.title},"".concat(i,"\u5546\u884c\u6574\u8f66\u660e\u7ec6\u8868")),m.default.createElement("div",{className:v.default.list},m.default.createElement("span",{className:v.default.train},"\u8f66\u6b21\uff1a".concat(n||""," ").concat(l?g.fixedZeroTo4Bit(l,4):"")),m.default.createElement("span",{className:v.default.time},"\u6253\u5370\u65f6\u95f4\uff1a".concat((0,h.default)().format("YYYY-MM-DD")))),m.default.createElement(f.default,{dataSource:t||[],columns:a,pagination:!1,bordered:!0}))}))}}]),e}(m.PureComponent));e.default=E}}]);